extends ../includes/boilerplate.jade
block css
    link(rel='stylesheet', href='/css/assignment.css')
    link(rel='stylesheet', href='/css/assignment-nav.css')
    link(rel='stylesheet', href='/components/css-toggle-switch/dist/toggle-switch.css')

block content
    div#fullContent
      include ../includes/header.jade
      include ../includes/assignment-nav.jade

      if (assignment && assignment.title && assignment.title.length > 0)
        h1#title0.assignmentTitle #{assignment.title}
      else
        h1#title0.assignmentTitle Assignment #{assignmentNumber}

      if (assignment && assignment.description  && assignment.description.length > 0)
        div#description0.assignmentDescription #{assignment.description}

      if (assignment.numSubassignments > 1)
        div#assignmentSlide
          div Subassignments:
          div#assignmentSlideButton1.btn.btn-default <
          span#currentSubassignment #{assignmentNumber}.#{assignment.subAssignment}
          div#assignmentSlideButton2.btn.btn-default >

      div#updateStatus
      div#assignmentCanvas(overflow='auto')
          div(id="vis0", display="block").assignmentContainer




block footerjs
    script.
        var owner = '#{owner}'
        var shared = '#{shared}'
        $('#private').prop('checked',false)
        $('#public').prop('checked',false)
        if (shared==='true')
            $('#public').prop('checked',true)
        else
            $('#private').prop('checked',true)

        var assignment = !{JSON.stringify(assignment)};
        var user = !{JSON.stringify(user)};
        var assignmentNumber = !{JSON.stringify(assignmentNumber)};
        var BridgesVisualizer = {};
        var numAssignments = assignment.numSubassignments;

    each script in linkResources.script
        script(src = script)

    each css in linkResources.css
        link(rel='stylesheet', href=css)

    script(src = '/js/Bridges/BridgesVisualizer.js')

    script(src = '/js/multiVisconfig.js')

    script.
        // Asynchronously update the assignment visibility
        function toggleShare (selected) {
            var assignmentNumber = !{JSON.stringify(assignmentNumber)}
            $.ajax({
                url: "/assignments/"+assignmentNumber+"/share/"+selected,
                type: "post"
            }).done(function() {
                console.log('visibility updated')
            }).fail(function(err){
                console.log(err)
            });
        }

        // TODO: Save snapshot of a particular assignment
        function saveSnapshot() {
            console.log("save snapshot");
        }
